# Fedora Silverblue 101

A concise, structured overview of the core concepts behind Fedora Silverblue, its filesystem layout, OS architecture, and practical implications for daily use.

---

## 1. What Silverblue *Is*

Fedora Silverblue is an **immutable**, image‑based variant of Fedora. Instead of installing and removing packages directly on the root filesystem, the system is built from an image (via `rpm-ostree`).

### Key Characteristics
- **Immutable root** → `/usr` is read‑only.
- **Transactional updates** → updates are staged and activated on reboot.
- **Rollback safe** → easily revert to the last working deployment.
- **Apps in containers** → Flatpak (desktop apps) + Toolbox/Distrobox (CLI workflows).

---

## 1. Filesystem Layout (Silverblue‑specific view)

A simplified map of the most relevant directories:

### `/usr` — *System Image*
- Read‑only except during OS image creation/update.
- Contains binaries, system libraries, and OS‑provided files.
- You **never** edit things here manually.

### `/etc` — *Editable System Configuration*
- Overrides configuration from `/usr`.
- On Silverblue, `/etc` persists across reboots and OS updates.
- Used for: services, configs, custom scripts, overrides.

### `/var` — *Variable System Data*
- Read/write.
- Application state: logs, databases, container storage, caches.

### `/home` — *User Data*
- Personal files, documents, user‑specific config.

### `/opt` — *Optional Add‑ons (Legacy)*
- Largely unused in Silverblue workflows.
- Still writable.

### `/run` — *Ephemeral Runtime Data*
- Cleared at boot.
- Systemd & service runtime state.

### `/dev`, `/sys`, `/proc` — *Virtual Kernel Filesystems*
Short explanation only (deep dives go elsewhere):
- **`/dev`** → Device files representing hardware.
- **`/sys`** → Kernel view of devices, drivers, hwmon, power, etc.
- **`/proc`** → Runtime kernel info, processes, CPU, memory.

These are generated by the kernel at boot and don’t live on disk.

---

## 1. The Silverblue Way of Installing Things

### System Packages → `rpm-ostree`
- Installing system-wide packages requires a *reboot*.
- Use sparingly.
- Recommended only for drivers and low‑level utilities.

### Graphical Apps → **Flatpak**
- Preferred way to install desktop applications.
- Sandboxed, auto‑updated, compatible with immutability.

### Command-line Tools → **Toolbox / Distrobox**
- Mutable environments on top of the immutable base.
- Perfect for dev tools, languages, heavy package usage.

---

## 1. Services & Custom Scripts on Silverblue

Silverblue supports systemd services **exactly like normal Fedora**, with two rules:

### Rule 1 — Scripts go in `/usr/local/bin` or `/etc/local/bin`
- These remain writable.
- They persist across system updates.

### Rule 2 — Unit files go in `/etc/systemd/system`
- Because `/usr` is read‑only.
- Edits here override image‑provided units.

This preserves the immutability contract while still enabling custom automation.

---

## 1. Sudo vs Non‑Sudo

Silverblue encourages **least privilege**:
- Use `sudo` **only** for system changes (`rpm-ostree`, system services, networking).
- Containers (Toolbox/Distrobox) run unprivileged and keep your main OS clean.
- Most daily tasks should need zero sudo.

---

## 1. When and Why to Use Toolbox/Distrobox

Use it when:
- You need language runtimes (Go, Rust, Python, Java).
- You need compilers, build tools, SDKs.
- You need to install lots of packages quickly.
- You don’t want to pollute or reboot the OS image.

Toolbox acts as your **mutable development layer**.

---

## 1. What Not to Do on Silverblue

- Don’t manually edit anything in `/usr`.
- Don’t install apps with `dnf` inside the host (doesn’t exist anyway).
- Avoid scripts or services stored in `/usr/bin` or `/usr/lib`.
- Avoid kernel module hacks unless absolutely necessary.

---

## 1. Summary Cheat Sheet

**Use `/etc` for:**
- Config files
- Systemd services
- Custom rules

**Use `/usr/local/bin` for:**
- Your scripts
- Executables not managed by OSTree

**Use `/var` for:**
- App data
- Databases
- Logs
- Container storage

**Use Toolbox/Distrobox for:**
- Anything needing `dnf`
- Language ecosystems
- Development environments

---

If you'd like, I can extend this document with:
- A deeper dive into virtual filesystems (`/dev`, `/sys`, `/proc`)
- Toolbox best‑practices
- Flatpak management tips
- Immutable system recovery/rollback workflows

